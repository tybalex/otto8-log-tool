2024-08-06T11:55:31.011017413Z if [[ ${KUBERNETES_SERVICE_HOST} =~ .*:.* ]]; then
2024-08-06T11:55:31.011046037Z 	echo "KUBERNETES_SERVICE_HOST is using IPv6"
2024-08-06T11:55:31.011050185Z 	CHART="${CHART//%\{KUBERNETES_API\}%/[${KUBERNETES_SERVICE_HOST}]:${KUBERNETES_SERVICE_PORT}}"
2024-08-06T11:55:31.011056116Z else
2024-08-06T11:55:31.011063400Z 	CHART="${CHART//%\{KUBERNETES_API\}%/${KUBERNETES_SERVICE_HOST}:${KUBERNETES_SERVICE_PORT}}"
2024-08-06T11:55:31.011066756Z fi
2024-08-06T11:55:31.011185831Z 
2024-08-06T11:55:31.011191943Z set +v -x
2024-08-06T11:55:31.011284688Z + [[ '' != \t\r\u\e ]]
2024-08-06T11:55:31.011837391Z + export HELM_HOST=127.0.0.1:44134
2024-08-06T11:55:31.011863560Z + HELM_HOST=127.0.0.1:44134
2024-08-06T11:55:31.011890682Z + helm_v2 init --skip-refresh --client-only --stable-repo-url https://charts.helm.sh/stable/
2024-08-06T11:55:31.011908625Z + tiller --listen=127.0.0.1:44134 --storage=secret
2024-08-06T11:55:31.096526601Z Creating /home/klipper-helm/.helm/repository 
2024-08-06T11:55:31.096549815Z Creating /home/klipper-helm/.helm/repository/cache 
2024-08-06T11:55:31.096554123Z Creating /home/klipper-helm/.helm/repository/local 
2024-08-06T11:55:31.096563571Z Creating /home/klipper-helm/.helm/plugins 
2024-08-06T11:55:31.096567348Z Creating /home/klipper-helm/.helm/starters 
2024-08-06T11:55:31.096641979Z Creating /home/klipper-helm/.helm/cache/archive 
2024-08-06T11:55:31.096651327Z Creating /home/klipper-helm/.helm/repository/repositories.yaml 
2024-08-06T11:55:31.096655925Z Adding stable repo with URL: https://charts.helm.sh/stable/ 
2024-08-06T11:55:31.096696271Z Adding local repo with URL: http://127.0.0.1:8879/charts 
2024-08-06T11:55:31.097591361Z $HELM_HOME has been configured at /home/klipper-helm/.helm.
2024-08-06T11:55:31.097613042Z Not installing Tiller due to 'client-only' flag having been set
2024-08-06T11:55:31.098199679Z [main] 2024/08/06 11:55:31 Starting Tiller v2.17.0 (tls=false)
2024-08-06T11:55:31.098211081Z [main] 2024/08/06 11:55:31 GRPC listening on 127.0.0.1:44134
2024-08-06T11:55:31.098214608Z [main] 2024/08/06 11:55:31 Probes listening on :44135
2024-08-06T11:55:31.098217583Z [main] 2024/08/06 11:55:31 Storage driver is Secret
2024-08-06T11:55:31.098220689Z [main] 2024/08/06 11:55:31 Max history per release is 0
2024-08-06T11:55:31.101423105Z ++ timeout -s KILL 30 helm_v2 ls --all '^rancher-logging$' --output json
2024-08-06T11:55:31.101694467Z ++ jq -r '.Releases | length'
2024-08-06T11:55:31.180157553Z [storage] 2024/08/06 11:55:31 listing all releases with filter
2024-08-06T11:55:31.205452056Z + V2_CHART_EXISTS=
2024-08-06T11:55:31.205599404Z + [[ '' == \1 ]]
2024-08-06T11:55:31.205656662Z + [[ '' == \v\2 ]]
2024-08-06T11:55:31.205683262Z + shopt -s nullglob
2024-08-06T11:55:31.205750339Z + [[ -f /config/ca-file.pem ]]
2024-08-06T11:55:31.205871177Z + [[ -f /tmp/ca-file.pem ]]
2024-08-06T11:55:31.205908127Z + [[ -n '' ]]
2024-08-06T11:55:31.205918306Z + helm_content_decode
2024-08-06T11:55:31.205959253Z + set -e
2024-08-06T11:55:31.205966206Z + ENC_CHART_PATH=/chart/rancher-logging.tgz.base64
2024-08-06T11:55:31.205984080Z + CHART_PATH=/tmp/rancher-logging.tgz
2024-08-06T11:55:31.206003747Z + [[ ! -f /chart/rancher-logging.tgz.base64 ]]
2024-08-06T11:55:31.206025308Z + return
2024-08-06T11:55:31.206049063Z + [[ install != \d\e\l\e\t\e ]]
2024-08-06T11:55:31.206060184Z + helm_repo_init
2024-08-06T11:55:31.206124996Z + grep -q -e 'https\?://'
2024-08-06T11:55:31.207630087Z + [[ helm_v3 == \h\e\l\m\_\v\3 ]]
2024-08-06T11:55:31.207641188Z + [[ rancher-logging/rancher-logging == stable/* ]]
2024-08-06T11:55:31.207659162Z + [[ -n http://harvester-cluster-repo.cattle-system.svc/charts ]]
2024-08-06T11:55:31.207690491Z + [[ -f /auth/username ]]
2024-08-06T11:55:31.207727351Z + helm_v3 repo add rancher-logging http://harvester-cluster-repo.cattle-system.svc/charts
2024-08-06T11:55:31.270867319Z "rancher-logging" has been added to your repositories
2024-08-06T11:55:31.275834867Z + helm_v3 repo update
2024-08-06T11:55:31.339801126Z Hang tight while we grab the latest from your chart repositories...
2024-08-06T11:55:31.347350768Z ...Successfully got an update from the "rancher-logging" chart repository
2024-08-06T11:55:31.347366127Z Update Complete. ⎈Happy Helming!⎈
2024-08-06T11:55:31.352979905Z + helm_update install --version 103.0.0+up3.17.10
2024-08-06T11:55:31.353067060Z + [[ helm_v3 == \h\e\l\m\_\v\3 ]]
2024-08-06T11:55:31.354253369Z ++ helm_v3 ls --all -f '^rancher-logging$' --namespace cattle-logging-system --output json
2024-08-06T11:55:31.354401499Z ++ jq -r '"\(.[0].chart),\(.[0].status)"'
2024-08-06T11:55:31.354693290Z ++ tr '[:upper:]' '[:lower:]'
2024-08-06T11:55:31.507183097Z + LINE=rancher-logging-103.0.0+up3.17.10,deployed
2024-08-06T11:55:31.507220417Z + IFS=,
2024-08-06T11:55:31.507225637Z + read -r INSTALLED_VERSION STATUS _
2024-08-06T11:55:31.507342879Z + VALUES=
2024-08-06T11:55:31.507457114Z + for VALUES_FILE in /config/*.yaml
2024-08-06T11:55:31.507466332Z + VALUES=' --values /config/values-01_HelmChart.yaml'
2024-08-06T11:55:31.507471161Z + [[ install = \d\e\l\e\t\e ]]
2024-08-06T11:55:31.508296328Z + [[ rancher-logging-103.0.0+up3.17.10 =~ ^(|null)$ ]]
2024-08-06T11:55:31.508307269Z + [[ deployed =~ ^(pending-install|pending-upgrade|pending-rollback)$ ]]
2024-08-06T11:55:31.508312389Z + [[ deployed == \d\e\p\l\o\y\e\d ]]
2024-08-06T11:55:31.508317168Z + echo 'Already installed rancher-logging'
2024-08-06T11:55:31.508311537Z Already installed rancher-logging
2024-08-06T11:55:31.508320925Z + [[ helm_v3 == \h\e\l\m\_\v\3 ]]
2024-08-06T11:55:31.508345261Z + helm_v3 mapkubeapis rancher-logging --namespace cattle-logging-system
2024-08-06T11:55:31.606165120Z 2024/08/06 11:55:31 Release 'rancher-logging' will be checked for deprecated or removed Kubernetes APIs and will be updated if necessary to supported API versions.
2024-08-06T11:55:31.606246784Z 2024/08/06 11:55:31 Get release 'rancher-logging' latest version.
2024-08-06T11:55:31.620065973Z 2024/08/06 11:55:31 Check release 'rancher-logging' for deprecated or removed APIs...
2024-08-06T11:55:31.625680011Z 2024/08/06 11:55:31 Finished checking release 'rancher-logging' for deprecated or removed APIs.
2024-08-06T11:55:31.625710649Z 2024/08/06 11:55:31 Release 'rancher-logging' has no deprecated or removed APIs.
2024-08-06T11:55:31.625718754Z 2024/08/06 11:55:31 Map of release 'rancher-logging' deprecated or removed APIs to supported versions, completed successfully.
2024-08-06T11:55:31.635979695Z + echo 'Upgrading helm_v3 chart'
2024-08-06T11:55:31.636076338Z + echo 'Upgrading rancher-logging'
2024-08-06T11:55:31.636094772Z Upgrading rancher-logging
2024-08-06T11:55:31.636109881Z + shift 1
2024-08-06T11:55:31.636169133Z + helm_v3 upgrade --version 103.0.0+up3.17.10 rancher-logging rancher-logging/rancher-logging --values /config/values-01_HelmChart.yaml
2024-08-06T11:55:36.016881734Z Release "rancher-logging" has been upgraded. Happy Helming!
2024-08-06T11:55:36.016940004Z NAME: rancher-logging
2024-08-06T11:55:36.016948911Z LAST DEPLOYED: Tue Aug  6 11:55:31 2024
2024-08-06T11:55:36.016955564Z NAMESPACE: cattle-logging-system
2024-08-06T11:55:36.016962507Z STATUS: deployed
2024-08-06T11:55:36.016970131Z REVISION: 2
2024-08-06T11:55:36.016977726Z TEST SUITE: None
2024-08-06T11:55:36.027347632Z + exit
