2024-08-06T01:51:54.283443353Z I0806 01:51:54.282556       1 main.go:210] CLI flags config: {etcdEndpoints:http://127.0.0.1:4001,http://127.0.0.1:2379 etcdPrefix:/coreos.com/network etcdKeyfile: etcdCertfile: etcdCAFile: etcdUsername: etcdPassword: version:false kubeSubnetMgr:true kubeApiUrl: kubeAnnotationPrefix:flannel.alpha.coreos.com kubeConfigFile: iface:[] ifaceRegex:[] ipMasq:true ifaceCanReach: subnetFile:/run/flannel/subnet.env publicIP: publicIPv6: subnetLeaseRenewMargin:60 healthzIP:0.0.0.0 healthzPort:0 iptablesResyncSeconds:5 iptablesForwardRules:true netConfPath:/etc/kube-flannel/net-conf.json setNodeNetworkUnavailable:true}
2024-08-06T01:51:54.283501824Z W0806 01:51:54.283407       1 client_config.go:618] Neither --kubeconfig nor --master was specified.  Using the inClusterConfig.  This might not work.
2024-08-06T01:51:54.293524783Z I0806 01:51:54.293428       1 kube.go:139] Waiting 10m0s for node controller to sync
2024-08-06T01:51:54.293543889Z I0806 01:51:54.293465       1 kube.go:455] Starting kube subnet manager
2024-08-06T01:51:55.294390805Z I0806 01:51:55.294121       1 kube.go:146] Node controller sync successful
2024-08-06T01:51:55.294414981Z I0806 01:51:55.294182       1 main.go:230] Created subnet manager: Kubernetes Subnet Manager - harvesterdev1
2024-08-06T01:51:55.294424108Z I0806 01:51:55.294193       1 main.go:233] Installing signal handlers
2024-08-06T01:51:55.294641089Z I0806 01:51:55.294554       1 main.go:442] Found network config - Backend type: vxlan
2024-08-06T01:51:55.294675194Z I0806 01:51:55.294614       1 match.go:210] Determining IP address of default interface
2024-08-06T01:51:55.295442649Z I0806 01:51:55.295357       1 match.go:263] Using interface with name mgmt-br and address 10.10.110.11
2024-08-06T01:51:55.295461265Z I0806 01:51:55.295395       1 match.go:285] Defaulting external address to interface address (10.10.110.11)
2024-08-06T01:51:55.295527931Z I0806 01:51:55.295481       1 vxlan.go:141] VXLAN config: VNI=1 Port=0 GBP=false Learning=false DirectRouting=false
2024-08-06T01:51:55.310799238Z I0806 01:51:55.310629       1 kube.go:621] List of node(harvesterdev1) annotations: map[string]string{"alpha.kubernetes.io/provided-node-ip":"10.10.110.11", "etcd.rke2.cattle.io/local-snapshots-timestamp":"2024-08-06T01:51:41Z", "etcd.rke2.cattle.io/node-address":"10.10.110.11", "etcd.rke2.cattle.io/node-name":"harvesterdev1-7d2dbac9", "node.alpha.kubernetes.io/ttl":"0", "rke2.io/encryption-config-hash":"start-4c3a9964db99c9f446ea7bbad801b42985a39d1ca884a81ac504823ac31f502d", "rke2.io/hostname":"harvesterdev1", "rke2.io/internal-ip":"10.10.110.11", "rke2.io/node-args":"[\"server\",\"--disable\",\"rke2-snapshot-controller\",\"--disable\",\"rke2-snapshot-controller-crd\",\"--disable\",\"rke2-snapshot-validation-webhook\",\"--node-label\",\"harvesterhci.io/managed=true\",\"--token\",\"********\",\"--kubelet-arg\",\"max-pods=200\",\"--kubelet-arg\",\"node-labels=node=storage\",\"--cni\",\"multus,canal\",\"--cluster-cidr\",\"10.52.0.0/16\",\"--service-cidr\",\"10.53.0.0/16\",\"--cluster-dns\",\"10.53.0.10\",\"--tls-san\",\"10.10.110.100\",\"--audit-policy-file\",\"/etc/rancher/rke2/config.yaml.d/92-harvester-kube-audit-policy.yaml\",\"--apiVersion\",\"audit.k8s.io/v1\",\"--kind\",\"Policy\",\"--omitStages\",\"ResponseStarted\",\"--omitStages\",\"ResponseComplete\",\"--rules\",\"[{level Metadata} {verbs [create delete patch]} {omitStages [ResponseStarted ResponseComplete]}]\"]", "rke2.io/node-config-hash":"MUSOPSAAMVSDH6ESCCBTFU7VE3YZSZCEHYHD5HO7Y3XSFGTD32QQ====", "rke2.io/node-env":"{}", "volumes.kubernetes.io/controller-managed-attach-detach":"true"}
2024-08-06T01:51:55.341231000Z I0806 01:51:55.341167       1 main.go:567] Starting flannel in iptables mode
2024-08-06T01:51:55.341319368Z W0806 01:51:55.341274       1 main.go:495] no subnet found for key: FLANNEL_NETWORK in file: /run/flannel/subnet.env
2024-08-06T01:51:55.341328024Z W0806 01:51:55.341296       1 main.go:495] no subnet found for key: FLANNEL_SUBNET in file: /run/flannel/subnet.env
2024-08-06T01:51:55.341367639Z W0806 01:51:55.341312       1 main.go:530] no subnet found for key: FLANNEL_IPV6_NETWORK in file: /run/flannel/subnet.env
2024-08-06T01:51:55.341376105Z W0806 01:51:55.341330       1 main.go:530] no subnet found for key: FLANNEL_IPV6_SUBNET in file: /run/flannel/subnet.env
2024-08-06T01:51:55.341436440Z I0806 01:51:55.341345       1 iptables.go:113] Current network or subnet (10.52.0.0/16, 10.52.0.0/24) is not equal to previous one (0.0.0.0/0, 0.0.0.0/0), trying to recycle old iptables rules
2024-08-06T01:51:55.341761246Z I0806 01:51:55.341700       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.0.0/24]
2024-08-06T01:51:55.383811619Z I0806 01:51:55.383703       1 iptables.go:123] Setting up masking rules
2024-08-06T01:51:55.386770991Z I0806 01:51:55.386718       1 iptables.go:224] Changing default FORWARD chain policy to ACCEPT
2024-08-06T01:51:55.388814886Z I0806 01:51:55.388767       1 main.go:386] Wrote subnet file to /run/flannel/subnet.env
2024-08-06T01:51:55.388825106Z I0806 01:51:55.388789       1 main.go:390] Running backend.
2024-08-06T01:51:55.388975561Z I0806 01:51:55.388938       1 vxlan_network.go:65] watching for new subnet leases
2024-08-06T01:51:55.396976923Z I0806 01:51:55.396896       1 main.go:411] Waiting for all goroutines to exit
2024-08-06T01:51:55.399017922Z I0806 01:51:55.398960       1 iptables.go:370] bootstrap done
2024-08-06T01:51:55.405249709Z I0806 01:51:55.405180       1 iptables.go:370] bootstrap done
2024-08-06T02:11:28.300634600Z I0806 02:11:28.300514       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.1.0/24]
2024-08-06T02:11:28.300692047Z I0806 02:11:28.300566       1 subnet.go:151] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa340100, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xa0a6e47, PublicIPv6:(*ip.IP6)(nil), BackendType:"vxlan", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x30, 0x32, 0x3a, 0x33, 0x38, 0x3a, 0x61, 0x63, 0x3a, 0x34, 0x38, 0x3a, 0x65, 0x30, 0x3a, 0x30, 0x61, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }
2024-08-06T02:11:28.300725569Z I0806 02:11:28.300689       1 vxlan_network.go:100] Received Subnet Event with VxLan: BackendType: vxlan, PublicIP: 10.10.110.71, PublicIPv6: (nil), BackendData: {"VNI":1,"VtepMAC":"02:38:ac:48:e0:0a"}, BackendV6Data: (nil)
2024-08-06T02:13:19.839846188Z I0806 02:13:19.839751       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.2.0/24]
2024-08-06T02:13:19.839967913Z I0806 02:13:19.839808       1 subnet.go:151] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa340200, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xa0a6e3d, PublicIPv6:(*ip.IP6)(nil), BackendType:"vxlan", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x63, 0x61, 0x3a, 0x63, 0x31, 0x3a, 0x39, 0x33, 0x3a, 0x63, 0x66, 0x3a, 0x61, 0x38, 0x3a, 0x31, 0x34, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }
2024-08-06T02:13:19.840082154Z I0806 02:13:19.839910       1 vxlan_network.go:100] Received Subnet Event with VxLan: BackendType: vxlan, PublicIP: 10.10.110.61, PublicIPv6: (nil), BackendData: {"VNI":1,"VtepMAC":"ca:c1:93:cf:a8:14"}, BackendV6Data: (nil)
2024-08-06T02:15:42.660177737Z I0806 02:15:42.660064       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.3.0/24]
2024-08-06T02:15:42.660262238Z I0806 02:15:42.660102       1 subnet.go:151] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa340300, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xa0a6ee8, PublicIPv6:(*ip.IP6)(nil), BackendType:"vxlan", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x33, 0x32, 0x3a, 0x34, 0x62, 0x3a, 0x34, 0x35, 0x3a, 0x64, 0x63, 0x3a, 0x64, 0x32, 0x3a, 0x34, 0x63, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }
2024-08-06T02:15:42.660275363Z I0806 02:15:42.660169       1 vxlan_network.go:100] Received Subnet Event with VxLan: BackendType: vxlan, PublicIP: 10.10.110.232, PublicIPv6: (nil), BackendData: {"VNI":1,"VtepMAC":"32:4b:45:dc:d2:4c"}, BackendV6Data: (nil)
