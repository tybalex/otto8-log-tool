2024-08-06T02:11:27.281443042Z I0806 02:11:27.280754       1 main.go:210] CLI flags config: {etcdEndpoints:http://127.0.0.1:4001,http://127.0.0.1:2379 etcdPrefix:/coreos.com/network etcdKeyfile: etcdCertfile: etcdCAFile: etcdUsername: etcdPassword: version:false kubeSubnetMgr:true kubeApiUrl: kubeAnnotationPrefix:flannel.alpha.coreos.com kubeConfigFile: iface:[] ifaceRegex:[] ipMasq:true ifaceCanReach: subnetFile:/run/flannel/subnet.env publicIP: publicIPv6: subnetLeaseRenewMargin:60 healthzIP:0.0.0.0 healthzPort:0 iptablesResyncSeconds:5 iptablesForwardRules:true netConfPath:/etc/kube-flannel/net-conf.json setNodeNetworkUnavailable:true}
2024-08-06T02:11:27.281504617Z W0806 02:11:27.281413       1 client_config.go:618] Neither --kubeconfig nor --master was specified.  Using the inClusterConfig.  This might not work.
2024-08-06T02:11:27.291562814Z I0806 02:11:27.291483       1 kube.go:139] Waiting 10m0s for node controller to sync
2024-08-06T02:11:27.291599663Z I0806 02:11:27.291546       1 kube.go:455] Starting kube subnet manager
2024-08-06T02:11:27.296333082Z I0806 02:11:27.296159       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.0.0/24]
2024-08-06T02:11:28.292492768Z I0806 02:11:28.292367       1 kube.go:146] Node controller sync successful
2024-08-06T02:11:28.292522484Z I0806 02:11:28.292412       1 main.go:230] Created subnet manager: Kubernetes Subnet Manager - harvesterdev2
2024-08-06T02:11:28.292542451Z I0806 02:11:28.292423       1 main.go:233] Installing signal handlers
2024-08-06T02:11:28.292725304Z I0806 02:11:28.292648       1 main.go:442] Found network config - Backend type: vxlan
2024-08-06T02:11:28.292762815Z I0806 02:11:28.292697       1 match.go:210] Determining IP address of default interface
2024-08-06T02:11:28.293443201Z I0806 02:11:28.293372       1 match.go:263] Using interface with name mgmt-br and address 10.10.110.71
2024-08-06T02:11:28.293455083Z I0806 02:11:28.293405       1 match.go:285] Defaulting external address to interface address (10.10.110.71)
2024-08-06T02:11:28.293537548Z I0806 02:11:28.293488       1 vxlan.go:141] VXLAN config: VNI=1 Port=0 GBP=false Learning=false DirectRouting=false
2024-08-06T02:11:28.296620431Z I0806 02:11:28.296469       1 kube.go:621] List of node(harvesterdev2) annotations: map[string]string{"alpha.kubernetes.io/provided-node-ip":"10.10.110.71", "management.cattle.io/pod-limits":"{\"cpu\":\"2300m\",\"memory\":\"1404Mi\"}", "management.cattle.io/pod-requests":"{\"cpu\":\"950m\",\"memory\":\"386Mi\",\"pods\":\"6\"}", "node.alpha.kubernetes.io/ttl":"0", "rke2.io/hostname":"harvesterdev2", "rke2.io/internal-ip":"10.10.110.71", "rke2.io/node-args":"[\"agent\",\"--node-label\",\"harvesterhci.io/managed=true\",\"--node-label\",\"rke.cattle.io/machine=dea33257-7c8d-484d-a419-b708bf2a4627\",\"--private-registry\",\"/etc/rancher/rke2/registries.yaml\",\"--server\",\"https://10.10.110.100:9345\",\"--token\",\"********\",\"--kubelet-arg\",\"max-pods=200\",\"--kubelet-arg\",\"node-labels=node=storage\",\"--apiVersion\",\"audit.k8s.io/v1\",\"--kind\",\"Policy\",\"--omitStages\",\"ResponseStarted\",\"--omitStages\",\"ResponseComplete\",\"--rules\",\"[{level Metadata} {verbs [create delete patch]} {omitStages [ResponseStarted ResponseComplete]}]\"]", "rke2.io/node-config-hash":"PVLPVFHNOBY2OBDF6MJEMWXRPNYDABZLD7CLZ7FTRVVQP3S66ZLA====", "rke2.io/node-env":"{}", "volumes.kubernetes.io/controller-managed-attach-detach":"true"}
2024-08-06T02:11:28.321869662Z I0806 02:11:28.321752       1 main.go:567] Starting flannel in iptables mode
2024-08-06T02:11:28.321894298Z W0806 02:11:28.321808       1 main.go:495] no subnet found for key: FLANNEL_NETWORK in file: /run/flannel/subnet.env
2024-08-06T02:11:28.321903405Z W0806 02:11:28.321816       1 main.go:495] no subnet found for key: FLANNEL_SUBNET in file: /run/flannel/subnet.env
2024-08-06T02:11:28.321912642Z W0806 02:11:28.321822       1 main.go:530] no subnet found for key: FLANNEL_IPV6_NETWORK in file: /run/flannel/subnet.env
2024-08-06T02:11:28.321954751Z W0806 02:11:28.321829       1 main.go:530] no subnet found for key: FLANNEL_IPV6_SUBNET in file: /run/flannel/subnet.env
2024-08-06T02:11:28.321976753Z I0806 02:11:28.321836       1 iptables.go:113] Current network or subnet (10.52.0.0/16, 10.52.1.0/24) is not equal to previous one (0.0.0.0/0, 0.0.0.0/0), trying to recycle old iptables rules
2024-08-06T02:11:28.324314668Z I0806 02:11:28.324247       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.1.0/24]
2024-08-06T02:11:28.384174590Z I0806 02:11:28.384067       1 iptables.go:123] Setting up masking rules
2024-08-06T02:11:28.390295932Z I0806 02:11:28.390188       1 iptables.go:224] Changing default FORWARD chain policy to ACCEPT
2024-08-06T02:11:28.392918542Z I0806 02:11:28.392796       1 main.go:386] Wrote subnet file to /run/flannel/subnet.env
2024-08-06T02:11:28.392942326Z I0806 02:11:28.392808       1 main.go:390] Running backend.
2024-08-06T02:11:28.393006306Z I0806 02:11:28.392925       1 vxlan_network.go:65] watching for new subnet leases
2024-08-06T02:11:28.393101565Z I0806 02:11:28.392972       1 subnet.go:151] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa340000, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xa0a6e0b, PublicIPv6:(*ip.IP6)(nil), BackendType:"vxlan", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x62, 0x61, 0x3a, 0x37, 0x35, 0x3a, 0x63, 0x65, 0x3a, 0x37, 0x32, 0x3a, 0x61, 0x31, 0x3a, 0x35, 0x34, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }
2024-08-06T02:11:28.393157650Z I0806 02:11:28.393117       1 vxlan_network.go:100] Received Subnet Event with VxLan: BackendType: vxlan, PublicIP: 10.10.110.11, PublicIPv6: (nil), BackendData: {"VNI":1,"VtepMAC":"ba:75:ce:72:a1:54"}, BackendV6Data: (nil)
2024-08-06T02:11:28.406007473Z I0806 02:11:28.405884       1 main.go:411] Waiting for all goroutines to exit
2024-08-06T02:11:28.408450185Z I0806 02:11:28.408407       1 iptables.go:370] bootstrap done
2024-08-06T02:11:28.420323467Z I0806 02:11:28.420227       1 iptables.go:370] bootstrap done
2024-08-06T02:13:19.863041632Z I0806 02:13:19.862909       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.2.0/24]
2024-08-06T02:13:19.863103730Z I0806 02:13:19.862981       1 subnet.go:151] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa340200, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xa0a6e3d, PublicIPv6:(*ip.IP6)(nil), BackendType:"vxlan", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x63, 0x61, 0x3a, 0x63, 0x31, 0x3a, 0x39, 0x33, 0x3a, 0x63, 0x66, 0x3a, 0x61, 0x38, 0x3a, 0x31, 0x34, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }
2024-08-06T02:13:19.863171709Z I0806 02:13:19.863105       1 vxlan_network.go:100] Received Subnet Event with VxLan: BackendType: vxlan, PublicIP: 10.10.110.61, PublicIPv6: (nil), BackendData: {"VNI":1,"VtepMAC":"ca:c1:93:cf:a8:14"}, BackendV6Data: (nil)
2024-08-06T02:15:42.677105882Z I0806 02:15:42.676999       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.3.0/24]
2024-08-06T02:15:42.677175734Z I0806 02:15:42.677061       1 subnet.go:151] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa340300, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xa0a6ee8, PublicIPv6:(*ip.IP6)(nil), BackendType:"vxlan", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x33, 0x32, 0x3a, 0x34, 0x62, 0x3a, 0x34, 0x35, 0x3a, 0x64, 0x63, 0x3a, 0x64, 0x32, 0x3a, 0x34, 0x63, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }
2024-08-06T02:15:42.677228324Z I0806 02:15:42.677157       1 vxlan_network.go:100] Received Subnet Event with VxLan: BackendType: vxlan, PublicIP: 10.10.110.232, PublicIPv6: (nil), BackendData: {"VNI":1,"VtepMAC":"32:4b:45:dc:d2:4c"}, BackendV6Data: (nil)
