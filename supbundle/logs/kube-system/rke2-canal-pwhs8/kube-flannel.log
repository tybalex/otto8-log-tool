2024-08-06T02:13:18.797367724Z I0806 02:13:18.797116       1 main.go:210] CLI flags config: {etcdEndpoints:http://127.0.0.1:4001,http://127.0.0.1:2379 etcdPrefix:/coreos.com/network etcdKeyfile: etcdCertfile: etcdCAFile: etcdUsername: etcdPassword: version:false kubeSubnetMgr:true kubeApiUrl: kubeAnnotationPrefix:flannel.alpha.coreos.com kubeConfigFile: iface:[] ifaceRegex:[] ipMasq:true ifaceCanReach: subnetFile:/run/flannel/subnet.env publicIP: publicIPv6: subnetLeaseRenewMargin:60 healthzIP:0.0.0.0 healthzPort:0 iptablesResyncSeconds:5 iptablesForwardRules:true netConfPath:/etc/kube-flannel/net-conf.json setNodeNetworkUnavailable:true}
2024-08-06T02:13:18.797415563Z W0806 02:13:18.797306       1 client_config.go:618] Neither --kubeconfig nor --master was specified.  Using the inClusterConfig.  This might not work.
2024-08-06T02:13:18.806581233Z I0806 02:13:18.806397       1 kube.go:455] Starting kube subnet manager
2024-08-06T02:13:18.806611058Z I0806 02:13:18.806154       1 kube.go:139] Waiting 10m0s for node controller to sync
2024-08-06T02:13:18.813745609Z I0806 02:13:18.813602       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.0.0/24]
2024-08-06T02:13:18.813772269Z I0806 02:13:18.813664       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.1.0/24]
2024-08-06T02:13:19.806690361Z I0806 02:13:19.806601       1 kube.go:146] Node controller sync successful
2024-08-06T02:13:19.806710589Z I0806 02:13:19.806635       1 main.go:230] Created subnet manager: Kubernetes Subnet Manager - harvesterdev3
2024-08-06T02:13:19.806717752Z I0806 02:13:19.806645       1 main.go:233] Installing signal handlers
2024-08-06T02:13:19.807224512Z I0806 02:13:19.807156       1 main.go:442] Found network config - Backend type: vxlan
2024-08-06T02:13:19.807240092Z I0806 02:13:19.807213       1 match.go:210] Determining IP address of default interface
2024-08-06T02:13:19.807817685Z I0806 02:13:19.807744       1 match.go:263] Using interface with name mgmt-br and address 10.10.110.61
2024-08-06T02:13:19.807826141Z I0806 02:13:19.807788       1 match.go:285] Defaulting external address to interface address (10.10.110.61)
2024-08-06T02:13:19.807919115Z I0806 02:13:19.807875       1 vxlan.go:141] VXLAN config: VNI=1 Port=0 GBP=false Learning=false DirectRouting=false
2024-08-06T02:13:19.810998690Z I0806 02:13:19.810905       1 kube.go:621] List of node(harvesterdev3) annotations: map[string]string{"alpha.kubernetes.io/provided-node-ip":"10.10.110.61", "management.cattle.io/pod-limits":"{\"cpu\":\"3450m\",\"memory\":\"3760Mi\"}", "management.cattle.io/pod-requests":"{\"cpu\":\"1400m\",\"memory\":\"1467Mi\",\"pods\":\"22\"}", "node.alpha.kubernetes.io/ttl":"0", "rke2.io/hostname":"harvesterdev3", "rke2.io/internal-ip":"10.10.110.61", "rke2.io/node-args":"[\"agent\",\"--node-label\",\"harvesterhci.io/managed=true\",\"--node-label\",\"rke.cattle.io/machine=50d0913d-af99-45ed-b61a-458690977c3d\",\"--private-registry\",\"/etc/rancher/rke2/registries.yaml\",\"--server\",\"https://10.10.110.100:9345\",\"--token\",\"********\",\"--kubelet-arg\",\"max-pods=200\",\"--kubelet-arg\",\"node-labels=node=storage,node-role.harvesterhci.io/worker=true\",\"--apiVersion\",\"audit.k8s.io/v1\",\"--kind\",\"Policy\",\"--omitStages\",\"ResponseStarted\",\"--omitStages\",\"ResponseComplete\",\"--rules\",\"[{level Metadata} {verbs [create delete patch]} {omitStages [ResponseStarted ResponseComplete]}]\"]", "rke2.io/node-config-hash":"D66P4VHMFSZMOHJ7XUVQA2QOZWDRJOA6TEWFHBEOK6LR7CSQMJKQ====", "rke2.io/node-env":"{}", "volumes.kubernetes.io/controller-managed-attach-detach":"true"}
2024-08-06T02:13:19.856417158Z I0806 02:13:19.856318       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.2.0/24]
2024-08-06T02:13:19.857053221Z I0806 02:13:19.856945       1 main.go:567] Starting flannel in iptables mode
2024-08-06T02:13:19.857083147Z W0806 02:13:19.857048       1 main.go:495] no subnet found for key: FLANNEL_NETWORK in file: /run/flannel/subnet.env
2024-08-06T02:13:19.857110308Z W0806 02:13:19.857064       1 main.go:495] no subnet found for key: FLANNEL_SUBNET in file: /run/flannel/subnet.env
2024-08-06T02:13:19.857124164Z W0806 02:13:19.857074       1 main.go:530] no subnet found for key: FLANNEL_IPV6_NETWORK in file: /run/flannel/subnet.env
2024-08-06T02:13:19.857137289Z W0806 02:13:19.857087       1 main.go:530] no subnet found for key: FLANNEL_IPV6_SUBNET in file: /run/flannel/subnet.env
2024-08-06T02:13:19.857152367Z I0806 02:13:19.857097       1 iptables.go:113] Current network or subnet (10.52.0.0/16, 10.52.2.0/24) is not equal to previous one (0.0.0.0/0, 0.0.0.0/0), trying to recycle old iptables rules
2024-08-06T02:13:19.920971954Z I0806 02:13:19.920911       1 iptables.go:123] Setting up masking rules
2024-08-06T02:13:19.928143663Z I0806 02:13:19.928092       1 iptables.go:224] Changing default FORWARD chain policy to ACCEPT
2024-08-06T02:13:19.931103063Z I0806 02:13:19.931027       1 main.go:386] Wrote subnet file to /run/flannel/subnet.env
2024-08-06T02:13:19.931119284Z I0806 02:13:19.931051       1 main.go:390] Running backend.
2024-08-06T02:13:19.931272672Z I0806 02:13:19.931163       1 vxlan_network.go:65] watching for new subnet leases
2024-08-06T02:13:19.931485611Z I0806 02:13:19.931259       1 subnet.go:151] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa340000, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xa0a6e0b, PublicIPv6:(*ip.IP6)(nil), BackendType:"vxlan", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x62, 0x61, 0x3a, 0x37, 0x35, 0x3a, 0x63, 0x65, 0x3a, 0x37, 0x32, 0x3a, 0x61, 0x31, 0x3a, 0x35, 0x34, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }
2024-08-06T02:13:19.931515797Z I0806 02:13:19.931436       1 subnet.go:151] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa340100, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xa0a6e47, PublicIPv6:(*ip.IP6)(nil), BackendType:"vxlan", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x30, 0x32, 0x3a, 0x33, 0x38, 0x3a, 0x61, 0x63, 0x3a, 0x34, 0x38, 0x3a, 0x65, 0x30, 0x3a, 0x30, 0x61, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }
2024-08-06T02:13:19.932535289Z I0806 02:13:19.932454       1 vxlan_network.go:100] Received Subnet Event with VxLan: BackendType: vxlan, PublicIP: 10.10.110.11, PublicIPv6: (nil), BackendData: {"VNI":1,"VtepMAC":"ba:75:ce:72:a1:54"}, BackendV6Data: (nil)
2024-08-06T02:13:19.934643002Z I0806 02:13:19.934564       1 vxlan_network.go:100] Received Subnet Event with VxLan: BackendType: vxlan, PublicIP: 10.10.110.71, PublicIPv6: (nil), BackendData: {"VNI":1,"VtepMAC":"02:38:ac:48:e0:0a"}, BackendV6Data: (nil)
2024-08-06T02:13:19.943171707Z I0806 02:13:19.943080       1 main.go:411] Waiting for all goroutines to exit
2024-08-06T02:13:19.953328455Z I0806 02:13:19.953255       1 iptables.go:370] bootstrap done
2024-08-06T02:13:19.973438679Z I0806 02:13:19.973370       1 iptables.go:370] bootstrap done
2024-08-06T02:15:42.672681020Z I0806 02:15:42.672572       1 kube.go:476] Creating the node lease for IPv4. This is the n.Spec.PodCIDRs: [10.52.3.0/24]
2024-08-06T02:15:42.672719664Z I0806 02:15:42.672627       1 subnet.go:151] Batch elem [0] is { lease.Event{Type:0, Lease:lease.Lease{EnableIPv4:true, EnableIPv6:false, Subnet:ip.IP4Net{IP:0xa340300, PrefixLen:0x18}, IPv6Subnet:ip.IP6Net{IP:(*ip.IP6)(nil), PrefixLen:0x0}, Attrs:lease.LeaseAttrs{PublicIP:0xa0a6ee8, PublicIPv6:(*ip.IP6)(nil), BackendType:"vxlan", BackendData:json.RawMessage{0x7b, 0x22, 0x56, 0x4e, 0x49, 0x22, 0x3a, 0x31, 0x2c, 0x22, 0x56, 0x74, 0x65, 0x70, 0x4d, 0x41, 0x43, 0x22, 0x3a, 0x22, 0x33, 0x32, 0x3a, 0x34, 0x62, 0x3a, 0x34, 0x35, 0x3a, 0x64, 0x63, 0x3a, 0x64, 0x32, 0x3a, 0x34, 0x63, 0x22, 0x7d}, BackendV6Data:json.RawMessage(nil)}, Expiration:time.Date(1, time.January, 1, 0, 0, 0, 0, time.UTC), Asof:0}} }
2024-08-06T02:15:42.672766723Z I0806 02:15:42.672720       1 vxlan_network.go:100] Received Subnet Event with VxLan: BackendType: vxlan, PublicIP: 10.10.110.232, PublicIPv6: (nil), BackendData: {"VNI":1,"VtepMAC":"32:4b:45:dc:d2:4c"}, BackendV6Data: (nil)
