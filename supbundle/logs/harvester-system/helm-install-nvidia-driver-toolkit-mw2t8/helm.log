2024-08-06T11:55:31.024563245Z if [[ ${KUBERNETES_SERVICE_HOST} =~ .*:.* ]]; then
2024-08-06T11:55:31.024596588Z 	echo "KUBERNETES_SERVICE_HOST is using IPv6"
2024-08-06T11:55:31.024604272Z 	CHART="${CHART//%\{KUBERNETES_API\}%/[${KUBERNETES_SERVICE_HOST}]:${KUBERNETES_SERVICE_PORT}}"
2024-08-06T11:55:31.024612799Z else
2024-08-06T11:55:31.024619080Z 	CHART="${CHART//%\{KUBERNETES_API\}%/${KUBERNETES_SERVICE_HOST}:${KUBERNETES_SERVICE_PORT}}"
2024-08-06T11:55:31.024624741Z fi
2024-08-06T11:55:31.024663334Z 
2024-08-06T11:55:31.024670177Z set +v -x
2024-08-06T11:55:31.024702558Z + [[ '' != \t\r\u\e ]]
2024-08-06T11:55:31.025229072Z + export HELM_HOST=127.0.0.1:44134
2024-08-06T11:55:31.025247958Z + HELM_HOST=127.0.0.1:44134
2024-08-06T11:55:31.025287823Z + helm_v2 init --skip-refresh --client-only --stable-repo-url https://charts.helm.sh/stable/
2024-08-06T11:55:31.025346734Z + tiller --listen=127.0.0.1:44134 --storage=secret
2024-08-06T11:55:31.104849403Z [main] 2024/08/06 11:55:31 Starting Tiller v2.17.0 (tls=false)
2024-08-06T11:55:31.104861355Z [main] 2024/08/06 11:55:31 GRPC listening on 127.0.0.1:44134
2024-08-06T11:55:31.104865463Z [main] 2024/08/06 11:55:31 Probes listening on :44135
2024-08-06T11:55:31.104870122Z [main] 2024/08/06 11:55:31 Storage driver is Secret
2024-08-06T11:55:31.104874260Z [main] 2024/08/06 11:55:31 Max history per release is 0
2024-08-06T11:55:31.106668687Z Creating /home/klipper-helm/.helm/repository 
2024-08-06T11:55:31.106678746Z Creating /home/klipper-helm/.helm/repository/cache 
2024-08-06T11:55:31.106697792Z Creating /home/klipper-helm/.helm/repository/local 
2024-08-06T11:55:31.106718842Z Creating /home/klipper-helm/.helm/plugins 
2024-08-06T11:55:31.106729162Z Creating /home/klipper-helm/.helm/starters 
2024-08-06T11:55:31.106744992Z Creating /home/klipper-helm/.helm/cache/archive 
2024-08-06T11:55:31.106783655Z Creating /home/klipper-helm/.helm/repository/repositories.yaml 
2024-08-06T11:55:31.106787552Z Adding stable repo with URL: https://charts.helm.sh/stable/ 
2024-08-06T11:55:31.106849539Z Adding local repo with URL: http://127.0.0.1:8879/charts 
2024-08-06T11:55:31.107714211Z $HELM_HOME has been configured at /home/klipper-helm/.helm.
2024-08-06T11:55:31.107725813Z Not installing Tiller due to 'client-only' flag having been set
2024-08-06T11:55:31.111269924Z ++ timeout -s KILL 30 helm_v2 ls --all '^nvidia-driver-toolkit$' --output json
2024-08-06T11:55:31.111524996Z ++ jq -r '.Releases | length'
2024-08-06T11:55:31.181738017Z [storage] 2024/08/06 11:55:31 listing all releases with filter
2024-08-06T11:55:31.207756606Z + V2_CHART_EXISTS=
2024-08-06T11:55:31.207918963Z + [[ '' == \1 ]]
2024-08-06T11:55:31.207939181Z + [[ '' == \v\2 ]]
2024-08-06T11:55:31.207958698Z + shopt -s nullglob
2024-08-06T11:55:31.208029902Z + [[ -f /config/ca-file.pem ]]
2024-08-06T11:55:31.208147594Z + [[ -f /tmp/ca-file.pem ]]
2024-08-06T11:55:31.208199342Z + [[ -n '' ]]
2024-08-06T11:55:31.208225842Z + helm_content_decode
2024-08-06T11:55:31.208269735Z + set -e
2024-08-06T11:55:31.208317926Z + ENC_CHART_PATH=/chart/nvidia-driver-toolkit.tgz.base64
2024-08-06T11:55:31.208326141Z + CHART_PATH=/tmp/nvidia-driver-toolkit.tgz
2024-08-06T11:55:31.208357921Z + [[ ! -f /chart/nvidia-driver-toolkit.tgz.base64 ]]
2024-08-06T11:55:31.208404359Z + return
2024-08-06T11:55:31.208435949Z + [[ install != \d\e\l\e\t\e ]]
2024-08-06T11:55:31.208450486Z + helm_repo_init
2024-08-06T11:55:31.208539855Z + grep -q -e 'https\?://'
2024-08-06T11:55:31.209947342Z + [[ helm_v3 == \h\e\l\m\_\v\3 ]]
2024-08-06T11:55:31.209958233Z + [[ nvidia-driver-toolkit/nvidia-driver-runtime == stable/* ]]
2024-08-06T11:55:31.209990063Z + [[ -n http://harvester-cluster-repo.cattle-system.svc/charts ]]
2024-08-06T11:55:31.209997607Z + [[ -f /auth/username ]]
2024-08-06T11:55:31.210058732Z + helm_v3 repo add nvidia-driver-toolkit http://harvester-cluster-repo.cattle-system.svc/charts
2024-08-06T11:55:31.279194700Z "nvidia-driver-toolkit" has been added to your repositories
2024-08-06T11:55:31.282179715Z + helm_v3 repo update
2024-08-06T11:55:31.335046069Z Hang tight while we grab the latest from your chart repositories...
2024-08-06T11:55:31.345849474Z ...Successfully got an update from the "nvidia-driver-toolkit" chart repository
2024-08-06T11:55:31.345874581Z Update Complete. ⎈Happy Helming!⎈
2024-08-06T11:55:31.349383806Z + helm_update install --version 0.1.1
2024-08-06T11:55:31.349470810Z + [[ helm_v3 == \h\e\l\m\_\v\3 ]]
2024-08-06T11:55:31.350632634Z ++ helm_v3 ls --all -f '^nvidia-driver-toolkit$' --namespace harvester-system --output json
2024-08-06T11:55:31.350815850Z ++ jq -r '"\(.[0].chart),\(.[0].status)"'
2024-08-06T11:55:31.351136084Z ++ tr '[:upper:]' '[:lower:]'
2024-08-06T11:55:31.566593174Z + LINE=nvidia-driver-runtime-0.1.1,deployed
2024-08-06T11:55:31.566612962Z + IFS=,
2024-08-06T11:55:31.566636797Z + read -r INSTALLED_VERSION STATUS _
2024-08-06T11:55:31.566757004Z + VALUES=
2024-08-06T11:55:31.566803241Z + for VALUES_FILE in /config/*.yaml
2024-08-06T11:55:31.566854668Z + VALUES=' --values /config/values-01_HelmChart.yaml'
2024-08-06T11:55:31.566873113Z + [[ install = \d\e\l\e\t\e ]]
2024-08-06T11:55:31.566887320Z + [[ nvidia-driver-runtime-0.1.1 =~ ^(|null)$ ]]
2024-08-06T11:55:31.567007466Z + [[ deployed =~ ^(pending-install|pending-upgrade|pending-rollback)$ ]]
2024-08-06T11:55:31.567176716Z + [[ deployed == \d\e\p\l\o\y\e\d ]]
2024-08-06T11:55:31.567196694Z + echo 'Already installed nvidia-driver-toolkit'
2024-08-06T11:55:31.567206131Z Already installed nvidia-driver-toolkit
2024-08-06T11:55:31.567228323Z + [[ helm_v3 == \h\e\l\m\_\v\3 ]]
2024-08-06T11:55:31.567288096Z + helm_v3 mapkubeapis nvidia-driver-toolkit --namespace harvester-system
2024-08-06T11:55:31.655859646Z 2024/08/06 11:55:31 Release 'nvidia-driver-toolkit' will be checked for deprecated or removed Kubernetes APIs and will be updated if necessary to supported API versions.
2024-08-06T11:55:31.655904290Z 2024/08/06 11:55:31 Get release 'nvidia-driver-toolkit' latest version.
2024-08-06T11:55:31.674440132Z 2024/08/06 11:55:31 Check release 'nvidia-driver-toolkit' for deprecated or removed APIs...
2024-08-06T11:55:31.677975958Z 2024/08/06 11:55:31 Finished checking release 'nvidia-driver-toolkit' for deprecated or removed APIs.
2024-08-06T11:55:31.677995895Z 2024/08/06 11:55:31 Release 'nvidia-driver-toolkit' has no deprecated or removed APIs.
2024-08-06T11:55:31.678002488Z 2024/08/06 11:55:31 Map of release 'nvidia-driver-toolkit' deprecated or removed APIs to supported versions, completed successfully.
2024-08-06T11:55:31.688711685Z + echo 'Upgrading helm_v3 chart'
2024-08-06T11:55:31.688878270Z + echo 'Upgrading nvidia-driver-toolkit'
2024-08-06T11:55:31.688886686Z + shift 1
2024-08-06T11:55:31.688915320Z Upgrading nvidia-driver-toolkit
2024-08-06T11:55:31.688924347Z + helm_v3 upgrade --version 0.1.1 nvidia-driver-toolkit nvidia-driver-toolkit/nvidia-driver-runtime --values /config/values-01_HelmChart.yaml
2024-08-06T11:55:32.597249404Z Release "nvidia-driver-toolkit" has been upgraded. Happy Helming!
2024-08-06T11:55:32.597322021Z NAME: nvidia-driver-toolkit
2024-08-06T11:55:32.597332030Z LAST DEPLOYED: Tue Aug  6 11:55:31 2024
2024-08-06T11:55:32.597337250Z NAMESPACE: harvester-system
2024-08-06T11:55:32.597341668Z STATUS: deployed
2024-08-06T11:55:32.597345295Z REVISION: 3
2024-08-06T11:55:32.597387304Z TEST SUITE: None
2024-08-06T11:55:32.602751120Z + exit
