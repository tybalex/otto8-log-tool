2024-08-06T02:24:13.900243127Z time="2024-08-06T02:24:13Z" level=debug msg="Sync Service: initialized" func=sync.InitService file="service.go:67" component=sync-server listen="0.0.0.0:8001"
2024-08-06T02:24:13.900494532Z time="2024-08-06T02:24:13Z" level=info msg="Started sync server at 0.0.0.0:8001" func=sync.NewServer file="server.go:30"
2024-08-06T02:24:14.901245153Z time="2024-08-06T02:24:14Z" level=info msg="The sync server of backing Image Manager listening to 0.0.0.0:8001" func=manager.NewServer file="server.go:34"
2024-08-06T02:24:14.902004046Z time="2024-08-06T02:24:14Z" level=info msg="Backing Image Manager listening to 0.0.0.0:8000" func=manager.NewServer file="server.go:55"
2024-08-06T02:24:16.771328939Z time="2024-08-06T02:24:16Z" level=info msg="Backing Image Manager: prepare to start backing image update watch" func="manager.(*Manager).Watch" file="service.go:567" component=backing-image-manager diskPath=/data/ diskUUID=d74b8deb-1d56-46de-9058-b1e6c18a775a
2024-08-06T02:24:16.771358966Z time="2024-08-06T02:24:16Z" level=info msg="Backing Image Manager: backing image update watch started" func="manager.(*Manager).Watch" file="service.go:582" component=backing-image-manager diskPath=/data/ diskUUID=d74b8deb-1d56-46de-9058-b1e6c18a775a
2024-08-06T02:24:16.772384333Z time="2024-08-06T02:24:16Z" level=info msg="Backing Image Manager: prepare to sync backing image" func="manager.(*Manager).Sync" file="service.go:310" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager diskPath=/data/ diskUUID=d74b8deb-1d56-46de-9058-b1e6c18a775a fromAddress="10.52.0.108:8000"
2024-08-06T02:24:16.772919624Z time="2024-08-06T02:24:16Z" level=debug msg="Sync Service: initializing sync file /data/backing-images/default-image-qwfqg-59c0d774/backing" func="sync.(*Service).checkAndInitSyncFile" file="service.go:269" component=sync-server listen="0.0.0.0:8001"
2024-08-06T02:24:16.773063936Z time="2024-08-06T02:24:16Z" level=info msg="SyncingFile: cannot to reuse the existing file, will clean it up then start processing: stat /data/backing-images/default-image-qwfqg-59c0d774/backing: no such file or directory" func=sync.NewSyncingFile.func1 file="sync_file.go:178" component=sync-file filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing uuid=59c0d774
2024-08-06T02:24:16.773228317Z time="2024-08-06T02:24:16Z" level=info msg="Backing Image Manager: started receiving backing image at port 30001" func="manager.(*Manager).Sync" file="service.go:382" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager diskPath=/data/ diskUUID=d74b8deb-1d56-46de-9058-b1e6c18a775a fromAddress="10.52.0.108:8000"
2024-08-06T02:24:17.773426494Z time="2024-08-06T02:24:17Z" level=info msg="SyncingFile: start to launch a receiver at port 30001" func="sync.(*SyncingFile).Receive" file="sync_file.go:625" component=sync-file filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing uuid=59c0d774
2024-08-06T02:24:17.773474494Z time="2024-08-06T02:24:17Z" level=info msg="Creating Ssync service" func=rest.Server file="server.go:79"
2024-08-06T02:24:17.773484794Z time="2024-08-06T02:24:17Z" level=info msg="file /data/backing-images/default-image-qwfqg-59c0d774/backing.tmp does not exist" func=rest.Server file="server.go:92"
2024-08-06T02:24:17.773797023Z time="2024-08-06T02:24:17Z" level=debug msg="failed to get IP from lhnet1 interface, fallback to use the default pod IP 10.52.2.20" func=util.GetIPForPod file="http_util.go:65" error="route ip+net: no such network interface"
2024-08-06T02:24:17.777028117Z time="2024-08-06T02:24:17Z" level=info msg="Backing Image Manager: started requesting sending backing image from address 10.52.0.108:8000 to address 10.52.2.20:30001" func="manager.(*Manager).Sync.func3" file="service.go:379" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager diskPath=/data/ diskUUID=d74b8deb-1d56-46de-9058-b1e6c18a775a fromAddress="10.52.0.108:8000"
2024-08-06T02:24:17.777636175Z time="2024-08-06T02:24:17Z" level=info msg="Receiving /data/backing-images/default-image-qwfqg-59c0d774/backing.tmp: size 261357568, directIO false" func="rest.(*SyncServer).doOpen" file="handlers.go:103"
2024-08-06T02:24:17.777750822Z time="2024-08-06T02:24:17Z" level=info msg="Ssync server is opened and ready for receiving file /data/backing-images/default-image-qwfqg-59c0d774/backing.tmp" func="rest.(*SyncServer).open" file="handlers.go:84"
2024-08-06T02:24:19.417928644Z time="2024-08-06T02:24:19Z" level=info msg="Closing Ssync server" func="rest.(*SyncServer).close" file="handlers.go:165"
2024-08-06T02:24:19.418193273Z time="2024-08-06T02:24:19Z" level=debug msg="SyncingFile: failed to get the checksum from a valid config during processing wrap-up, will directly calculated it then" func="sync.(*SyncingFile).finishProcessing" file="sync_file.go:761"
2024-08-06T02:24:19.934636564Z time="2024-08-06T02:24:19Z" level=debug msg="SyncingFile: writing config file when the file becomes ready" func="sync.(*SyncingFile).writeConfigNoLock" file="sync_file.go:856" component=sync-file currentChecksum=1a9518d76cd3fa3adf7ee4126f6ab7e89b209d7056be7d7a6b57e7760f4b9a5a6bae54cb11a0cb125571011135bb3f47052189d74a523aa5e81ab1af6de0acfb filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing size=261357568 uuid=59c0d774
2024-08-06T02:24:19.934880164Z time="2024-08-06T02:24:19Z" level=info msg="SyncingFile: succeeded processing file" func="sync.(*SyncingFile).postProcessSyncFile" file="sync_file.go:807" component=sync-file currentChecksum=1a9518d76cd3fa3adf7ee4126f6ab7e89b209d7056be7d7a6b57e7760f4b9a5a6bae54cb11a0cb125571011135bb3f47052189d74a523aa5e81ab1af6de0acfb filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing size=261357568 uuid=59c0d774
2024-08-06T02:24:20.778147412Z time="2024-08-06T02:24:20Z" level=info msg="Backing Image Manager: start to release port 30001 after syncing" func="manager.(*Manager).Sync.func2" file="service.go:324" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager diskPath=/data/ diskUUID=d74b8deb-1d56-46de-9058-b1e6c18a775a fromAddress="10.52.0.108:8000"
2024-08-06T02:24:21.780206752Z time="2024-08-06T02:24:21Z" level=info msg="Backing Image Manager: released port 30001 after syncing" func="manager.(*Manager).Sync.func2" file="service.go:332" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager diskPath=/data/ diskUUID=d74b8deb-1d56-46de-9058-b1e6c18a775a fromAddress="10.52.0.108:8000"
