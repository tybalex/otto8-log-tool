2024-08-06T02:09:29.112885875Z time="2024-08-06T02:09:29Z" level=debug msg="Sync Service: initialized" func=sync.InitService file="service.go:67" component=sync-server listen="0.0.0.0:8001"
2024-08-06T02:09:29.113302434Z time="2024-08-06T02:09:29Z" level=info msg="Started sync server at 0.0.0.0:8001" func=sync.NewServer file="server.go:30"
2024-08-06T02:09:30.116049891Z time="2024-08-06T02:09:30Z" level=info msg="The sync server of backing Image Manager listening to 0.0.0.0:8001" func=manager.NewServer file="server.go:34"
2024-08-06T02:09:30.117253070Z time="2024-08-06T02:09:30Z" level=info msg="Backing Image Manager listening to 0.0.0.0:8000" func=manager.NewServer file="server.go:55"
2024-08-06T02:09:32.055787121Z time="2024-08-06T02:09:32Z" level=info msg="Backing Image Manager: prepare to start backing image update watch" func="manager.(*Manager).Watch" file="service.go:567" component=backing-image-manager diskPath=/data/ diskUUID=c9ff8501-8c22-4cc0-810e-65214001909d
2024-08-06T02:09:32.055818640Z time="2024-08-06T02:09:32Z" level=info msg="Backing Image Manager: backing image update watch started" func="manager.(*Manager).Watch" file="service.go:582" component=backing-image-manager diskPath=/data/ diskUUID=c9ff8501-8c22-4cc0-810e-65214001909d
2024-08-06T02:11:08.586291745Z time="2024-08-06T02:11:08Z" level=info msg="Backing Image Manager: prepare to fetch backing image" func="manager.(*Manager).Fetch" file="service.go:447" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager data_source_address="10.52.0.107:8000" diskPath=/data/ diskUUID=c9ff8501-8c22-4cc0-810e-65214001909d
2024-08-06T02:11:08.586333603Z time="2024-08-06T02:11:08Z" level=info msg="Backing Image Manager: need to transfer the file from the data source server first" func="manager.(*Manager).Fetch" file="service.go:461" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager data_source_address="10.52.0.107:8000" diskPath=/data/ diskUUID=c9ff8501-8c22-4cc0-810e-65214001909d
2024-08-06T02:11:08.588269264Z time="2024-08-06T02:11:08Z" level=debug msg="Sync Service: initializing sync file /data/backing-images/default-image-qwfqg-59c0d774/backing" func="sync.(*Service).checkAndInitSyncFile" file="service.go:269" component=sync-server listen="0.0.0.0:8001"
2024-08-06T02:11:08.588441174Z time="2024-08-06T02:11:08Z" level=info msg="SyncingFile: cannot to reuse the existing file, will clean it up then start processing: stat /data/backing-images/default-image-qwfqg-59c0d774/backing: no such file or directory" func=sync.NewSyncingFile.func1 file="sync_file.go:178" component=sync-file filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing uuid=59c0d774
2024-08-06T02:11:08.588503220Z time="2024-08-06T02:11:08Z" level=info msg="Backing Image Manager: fetched or reused backing image" func="manager.(*Manager).Fetch" file="service.go:485" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager data_source_address="10.52.0.107:8000" diskPath=/data/ diskUUID=c9ff8501-8c22-4cc0-810e-65214001909d
2024-08-06T02:11:09.589113660Z time="2024-08-06T02:11:09Z" level=info msg="SyncingFile: start to fetch sync file from /data/tmp/default-image-qwfqg-59c0d774" func="sync.(*SyncingFile).Fetch" file="sync_file.go:422" component=sync-file filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing uuid=59c0d774
2024-08-06T02:11:09.589180995Z time="2024-08-06T02:11:09Z" level=debug msg="SyncingFile: need to fetch the syncing file from /data/tmp/default-image-qwfqg-59c0d774" func="sync.(*SyncingFile).Fetch" file="sync_file.go:457" component=sync-file filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing uuid=59c0d774
2024-08-06T02:11:09.589297202Z time="2024-08-06T02:11:09Z" level=debug msg="SyncingFile: found the corresponding src config file /data/tmp/default-image-qwfqg-59c0d774.cfg" func="sync.(*SyncingFile).Fetch" file="sync_file.go:471" component=sync-file filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing uuid=59c0d774
2024-08-06T02:11:09.589519888Z time="2024-08-06T02:11:09Z" level=debug msg="SyncingFile: directly get the checksum from the valid config during processing wrap-up: 1a9518d76cd3fa3adf7ee4126f6ab7e89b209d7056be7d7a6b57e7760f4b9a5a6bae54cb11a0cb125571011135bb3f47052189d74a523aa5e81ab1af6de0acfb" func="sync.(*SyncingFile).finishProcessing" file="sync_file.go:746"
2024-08-06T02:11:09.650385712Z time="2024-08-06T02:11:09Z" level=debug msg="SyncingFile: writing config file when the file becomes ready" func="sync.(*SyncingFile).writeConfigNoLock" file="sync_file.go:856" component=sync-file currentChecksum=1a9518d76cd3fa3adf7ee4126f6ab7e89b209d7056be7d7a6b57e7760f4b9a5a6bae54cb11a0cb125571011135bb3f47052189d74a523aa5e81ab1af6de0acfb filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing size=261357568 uuid=59c0d774
2024-08-06T02:11:09.651007191Z time="2024-08-06T02:11:09Z" level=info msg="SyncingFile: succeeded processing file" func="sync.(*SyncingFile).finishProcessing" file="sync_file.go:757" component=sync-file currentChecksum=1a9518d76cd3fa3adf7ee4126f6ab7e89b209d7056be7d7a6b57e7760f4b9a5a6bae54cb11a0cb125571011135bb3f47052189d74a523aa5e81ab1af6de0acfb filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing size=261357568 uuid=59c0d774
2024-08-06T02:11:09.651051063Z time="2024-08-06T02:11:09Z" level=info msg="SyncingFile: try to clean up src file /data/tmp/default-image-qwfqg-59c0d774 and its config file /data/tmp/default-image-qwfqg-59c0d774.cfg after fetch" func="sync.(*SyncingFile).Fetch.func1" file="sync_file.go:430" component=sync-file currentChecksum=1a9518d76cd3fa3adf7ee4126f6ab7e89b209d7056be7d7a6b57e7760f4b9a5a6bae54cb11a0cb125571011135bb3f47052189d74a523aa5e81ab1af6de0acfb filePath=/data/backing-images/default-image-qwfqg-59c0d774/backing size=261357568 uuid=59c0d774
2024-08-06T02:24:17.532083177Z time="2024-08-06T02:24:17Z" level=info msg="Backing Image Manager: prepare to send backing image" func="manager.(*Manager).Send" file="service.go:425" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager diskPath=/data/ diskUUID=c9ff8501-8c22-4cc0-810e-65214001909d toAddress="10.52.1.29:30001"
2024-08-06T02:24:17.532903685Z time="2024-08-06T02:24:17Z" level=info msg="Backing Image Manager: started sending backing image" func="manager.(*Manager).Send" file="service.go:441" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager diskPath=/data/ diskUUID=c9ff8501-8c22-4cc0-810e-65214001909d toAddress="10.52.1.29:30001"
2024-08-06T02:24:17.533067903Z time="2024-08-06T02:24:17Z" level=info msg="Syncing file /data/backing-images/default-image-qwfqg-59c0d774/backing to 10.52.1.29:30001: size 261357568, directIO false, fastSync false" func=sparse.SyncFile file="client.go:110"
2024-08-06T02:24:17.534907072Z time="2024-08-06T02:24:17Z" level=debug msg="Retrieved extents for file backing, fileSize 261357568, elapsed 0.00s, extents 28" func=sparse.GetFileLayout.func1.1 file="file.go:247"
2024-08-06T02:24:17.764875612Z time="2024-08-06T02:24:17Z" level=info msg="Backing Image Manager: prepare to send backing image" func="manager.(*Manager).Send" file="service.go:425" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager diskPath=/data/ diskUUID=c9ff8501-8c22-4cc0-810e-65214001909d toAddress="10.52.2.20:30001"
2024-08-06T02:24:17.765448726Z time="2024-08-06T02:24:17Z" level=info msg="Backing Image Manager: started sending backing image" func="manager.(*Manager).Send" file="service.go:441" biName=default-image-qwfqg biUUID=59c0d774 component=backing-image-manager diskPath=/data/ diskUUID=c9ff8501-8c22-4cc0-810e-65214001909d toAddress="10.52.2.20:30001"
2024-08-06T02:24:17.765615840Z time="2024-08-06T02:24:17Z" level=info msg="Syncing file /data/backing-images/default-image-qwfqg-59c0d774/backing to 10.52.2.20:30001: size 261357568, directIO false, fastSync false" func=sparse.SyncFile file="client.go:110"
2024-08-06T02:24:17.767815855Z time="2024-08-06T02:24:17Z" level=debug msg="Retrieved extents for file backing, fileSize 261357568, elapsed 0.00s, extents 28" func=sparse.GetFileLayout.func1.1 file="file.go:247"
2024-08-06T02:24:18.302208673Z time="2024-08-06T02:24:18Z" level=info msg="Finished sync for the source file /data/backing-images/default-image-qwfqg-59c0d774/backing, size 261357568, elapsed 0.77s" func=sparse.SyncContent file="client.go:171"
2024-08-06T02:24:18.323822534Z time="2024-08-06T02:24:18Z" level=info msg="Finished sync for the source file /data/backing-images/default-image-qwfqg-59c0d774/backing, size 261357568, elapsed 0.56s" func=sparse.SyncContent file="client.go:171"
